(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{519:function(s,n,e){"use strict";e.r(n);var a=e(29),r=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h3",{attrs:{id:"_01、安装orm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_01、安装orm"}},[s._v("#")]),s._v(" 01、安装ORM")]),s._v(" "),e("p",[s._v("执行"),e("code",[s._v("pip install sqlalchemy")]),s._v(","),e("code",[s._v("pip install pymysql")])]),s._v(" "),e("h3",{attrs:{id:"_02、使用orm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_02、使用orm"}},[s._v("#")]),s._v(" 02、使用ORM")]),s._v(" "),e("p",[s._v("新建db_mysql.py文件,输入以下内容:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('from sqlalchemy.orm import sessionmaker, scoped_session\nfrom sqlalchemy import create_engine\n\n# 建立数据库连接实例\nengine = create_engine(\n        "mysql+pymysql://root:123456@127.0.0.1:3306/demo?charset=utf8",\n        max_overflow=0,  # 超过连接池大小外最多创建的连接\n        pool_size=5,  # 连接池大小\n        pool_timeout=30,  # 池中没有线程最多等待的时间，否则报错\n        pool_recycle=-1  # 多久之后对线程池中的线程进行一次连接的回收（重置）\n    )\n\n\nclass MySQLService():\n\n    @staticmethod\n    def execute(sql):\n        obj_session = sessionmaker(bind=engine)\n        #使用scoped_session,防止线程不安全\n        db_session = scoped_session(obj_session)\n        cursor = db_session.execute(sql)\n        res_rows = cursor.fetchall()\n        #查询是数据转化成字典\n        res = [dict(zip(result.keys(), result)) for result in res_rows]\n        db_session.close()\n        return res\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br")])])])}),[],!1,null,null,null);n.default=r.exports}}]);