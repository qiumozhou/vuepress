(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{450:function(s,n,e){"use strict";e.r(n);var a=e(6),r=Object(a.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h3",{attrs:{id:"_01、安装orm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_01、安装orm"}},[s._v("#")]),s._v(" 01、安装ORM")]),s._v(" "),n("p",[s._v("执行"),n("code",[s._v("pip install sqlalchemy")]),s._v(","),n("code",[s._v("pip install pymysql")])]),s._v(" "),n("h3",{attrs:{id:"_02、使用orm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_02、使用orm"}},[s._v("#")]),s._v(" 02、使用ORM")]),s._v(" "),n("p",[s._v("新建db_mysql.py文件,输入以下内容:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('from sqlalchemy.orm import sessionmaker, scoped_session\nfrom sqlalchemy import create_engine\n\n# 建立数据库连接实例\nengine = create_engine(\n        "mysql+pymysql://root:123456@127.0.0.1:3306/demo?charset=utf8",\n        max_overflow=0,  # 超过连接池大小外最多创建的连接\n        pool_size=5,  # 连接池大小\n        pool_timeout=30,  # 池中没有线程最多等待的时间，否则报错\n        pool_recycle=-1  # 多久之后对线程池中的线程进行一次连接的回收（重置）\n    )\n\n\nclass MySQLService():\n\n    @staticmethod\n    def execute(sql):\n        obj_session = sessionmaker(bind=engine)\n        #使用scoped_session,防止线程不安全\n        db_session = scoped_session(obj_session)\n        cursor = db_session.execute(sql)\n        res_rows = cursor.fetchall()\n        #查询是数据转化成字典\n        res = [dict(zip(result.keys(), result)) for result in res_rows]\n        db_session.close()\n        return res\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])])])}),[],!1,null,null,null);n.default=r.exports}}]);