(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{323:function(s,t,e){s.exports=e.p+"assets/img/celery-01.882edc9a.png"},324:function(s,t,e){s.exports=e.p+"assets/img/celery-03.6e4fe782.png"},325:function(s,t,e){s.exports=e.p+"assets/img/celery-04.11c027c9.png"},326:function(s,t,e){s.exports=e.p+"assets/img/celery-05.61afa860.png"},444:function(s,t,e){"use strict";e.r(t);var a=e(6),n=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"_01、安装celery"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_01、安装celery"}},[s._v("#")]),s._v(" 01、安装celery")]),s._v(" "),t("p",[s._v("执行"),t("code",[s._v("pip3.8 install celery==4.4.1")]),s._v(" "),t("img",{attrs:{src:e(323),alt:""}})]),s._v(" "),t("h3",{attrs:{id:"_02、编写异步任务代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_02、编写异步任务代码"}},[s._v("#")]),s._v(" 02、编写异步任务代码")]),s._v(" "),t("p",[s._v("新建/test/test.py文件，拷贝如下代码:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("from celery import Celery\n\ncelery_app = Celery('test', broker='redis://localhost:6379/0')\n\n@celery_app.task\ndef test_task(n):\n    print(n)\n\nif __name__ == '__main__':\n    test_task.delay('==== ttttt1 =====')\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"_03、创建异步任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_03、创建异步任务"}},[s._v("#")]),s._v(" 03、创建异步任务")]),s._v(" "),t("p",[s._v("进入test文件夹,执行"),t("code",[s._v("python3.8 test.py")])]),s._v(" "),t("h3",{attrs:{id:"_04、创建worker-消费任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_04、创建worker-消费任务"}},[s._v("#")]),s._v(" 04、创建worker,消费任务")]),s._v(" "),t("p",[s._v("进入test文件夹,执行"),t("code",[s._v("python3.8 celery worker -A test --loglevel=debug")]),s._v(" "),t("img",{attrs:{src:e(324),alt:""}})]),s._v(" "),t("h3",{attrs:{id:"_05、创建定时任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_05、创建定时任务"}},[s._v("#")]),s._v(" 05、创建定时任务")]),s._v(" "),t("p",[s._v("在test.py中加入以下代码:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('celery_app.conf.beat_schedule = {\n    "test":{\n        "task":"test.demo",\n        #秒\n        "schedule":5\n    }\n}\n\n@celery.task\ndef demo():\n    print(1111111)\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"_06、执行定时任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_06、执行定时任务"}},[s._v("#")]),s._v(" 06、执行定时任务")]),s._v(" "),t("p",[s._v("进入到test文件夹,执行"),t("code",[s._v("python3.8 -m celery -A test beat")]),s._v(",开始发布任务\n"),t("img",{attrs:{src:e(325),alt:""}})]),s._v(" "),t("p",[s._v("进入到test文件夹,执行"),t("code",[s._v("python3.8 -m celery worker -A test --loglevel=debug")]),s._v(",开始执行任务\n"),t("img",{attrs:{src:e(326),alt:""}})])])}),[],!1,null,null,null);t.default=n.exports}}]);