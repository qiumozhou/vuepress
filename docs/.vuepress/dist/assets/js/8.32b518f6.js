(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{395:function(t,s,a){t.exports=a.p+"assets/img/gitlib01.e33811e5.png"},396:function(t,s,a){t.exports=a.p+"assets/img/gitlib02.d7bd5b6c.png"},397:function(t,s,a){t.exports=a.p+"assets/img/gitlib03.c46628c1.png"},398:function(t,s,a){t.exports=a.p+"assets/img/gitlib04.7e77f36a.png"},399:function(t,s,a){t.exports=a.p+"assets/img/gitlib05.fd8c9410.png"},518:function(t,s,a){"use strict";a.r(s);var e=a(6),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("前言:目前中小型企业内部的版本管理工具一般都是git系，svn渐渐退出历史的舞台，企业内部一般会自建git版本管理，毕竟互联网代码还是很重要的，自建能一定程度保证公司的代码安全。")]),t._v(" "),s("h3",{attrs:{id:"_01、安装依赖包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01、安装依赖包"}},[t._v("#")]),t._v(" 01、安装依赖包")]),t._v(" "),s("p",[t._v("执行")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo apt-get update\n\nsudo apt-get install -y curl openssh-server ca-certificates \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h3",{attrs:{id:"_02、邮件配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02、邮件配置"}},[t._v("#")]),t._v(" 02、邮件配置")]),t._v(" "),s("p",[t._v("执行"),s("code",[t._v("sudo apt-get install -y postfix")]),t._v("\n选择"),s("code",[t._v("internet site")]),t._v("\n输入"),s("code",[t._v("master")])]),t._v(" "),s("h3",{attrs:{id:"_03、配置公钥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03、配置公钥"}},[t._v("#")]),t._v(" 03、配置公钥")]),t._v(" "),s("p",[t._v("执行"),s("code",[t._v("curl https://packages.gitlab.com/gpg.key 2> /dev/null | sudo apt-key add - &>/dev/null")])]),t._v(" "),s("h3",{attrs:{id:"_04、修改镜像源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_04、修改镜像源"}},[t._v("#")]),t._v(" 04、修改镜像源")]),t._v(" "),s("p",[t._v("把"),s("code",[t._v("deb https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/ubuntu xenial main")]),t._v("写入\n"),s("code",[t._v("/etc/apt/sources.list.d/gitlab-ce.list")])]),t._v(" "),s("h3",{attrs:{id:"_05、开始安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_05、开始安装"}},[t._v("#")]),t._v(" 05、开始安装")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo apt-get update\nsudo apt list gitlab-ce -a\nsudo apt-get install -f gitlab-ce\n\n#安装指定版本\nsudo apt-get install -f gitlab-ce=12.3.6-ce.0\n一定要选对符合自己服务器的版本,不然会出现问题,我踩了很长时间的坑,在这里\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[s("img",{attrs:{src:a(395),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_06、修改配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_06、修改配置文件"}},[t._v("#")]),t._v(" 06、修改配置文件")]),t._v(" "),s("p",[t._v("打开"),s("code",[t._v("sudo vim /etc/gitlab/gitlab.rb")]),t._v(",把文件中的\nexternal_url 'http://localhost' 修改为"),s("code",[t._v("externa_url 'http://127.0.0.1:8080'")]),t._v("\n打开"),s("code",[t._v("sudo vim /var/opt/gitlab/gitlab-rails/etc/unicorn.rb")]),t._v(',把文件中的listen "127.0.0.1:8080",\n修改为'),s("code",[t._v('listen "127.0.0.1:8080"')]),t._v("(低版本的没有)")]),t._v(" "),s("p",[s("img",{attrs:{src:a(396),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_07、重启配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_07、重启配置"}},[t._v("#")]),t._v(" 07、重启配置")]),t._v(" "),s("p",[t._v("执行"),s("code",[t._v("sudo gitlab-ctl reconfigure")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(397),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_08、重启服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_08、重启服务"}},[t._v("#")]),t._v(" 08、重启服务")]),t._v(" "),s("p",[t._v("执行"),s("code",[t._v("sudo gitlab-ctl restart")])]),t._v(" "),s("h3",{attrs:{id:"_09、打开sshd和postfix服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_09、打开sshd和postfix服务"}},[t._v("#")]),t._v(" 09、打开sshd和postfix服务")]),t._v(" "),s("p",[t._v("执行"),s("code",[t._v("service sshd start")]),t._v(","),s("code",[t._v("service postfix start")])]),t._v(" "),s("h3",{attrs:{id:"_10、访问服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10、访问服务"}},[t._v("#")]),t._v(" 10、访问服务")]),t._v(" "),s("p",[s("code",[t._v("http://127.0.0.1:8080")]),t._v("\n内存至少4g,因为我这里虚拟机只有2g,所以报错了,下次有条件了更新吧")]),t._v(" "),s("p",[s("img",{attrs:{src:a(398),alt:""}})]),t._v(" "),s("p",[t._v("换了4g内存之后的")]),t._v(" "),s("p",[s("img",{attrs:{src:a(399),alt:""}})])])}),[],!1,null,null,null);s.default=r.exports}}]);